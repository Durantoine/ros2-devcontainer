services:
  ros2:
    platform: linux/arm64
    build:
      context: .
      dockerfile: Dockerfile
    image: local/ros2-m3:latest
    container_name: ros2_dev
    stdin_open: true
    tty: true
    ports:
      - "8765:8765"  # Foxglove Bridge (Gazebo)
      - "8000:8000"
      - "6080:6080"  # noVNC (RViz)
    environment:
      - ROS_DOMAIN_ID=0
    volumes:
      - ./workspaces:/workspaces
    network_mode: bridge